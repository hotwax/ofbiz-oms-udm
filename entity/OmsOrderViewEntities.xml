<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-3.xsd">

    <!-- NOTE: Not adding the billing details as they are not stored in OMS -->
    <view-entity entity-name="SalesOrderView" package="co.hotwax.financial">
        <description>View to get Order details for Financial Feed processing.</description>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="PS" entity-name="org.apache.ofbiz.product.store.ProductStore" join-from-alias="OH">
            <key-map field-name="productStoreId" related="productStoreId"/>
        </member-entity>
        <member-entity entity-alias="F" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="OISG" join-optional="true">
            <key-map field-name="facilityId"/>
        </member-entity>
        <member-entity entity-alias="FT" entity-name="org.apache.ofbiz.product.facility.FacilityType" join-from-alias="F" join-optional="true">
            <key-map field-name="facilityTypeId"/>
        </member-entity>
        <member-entity entity-alias="UOM" entity-name="moqui.basic.Uom" join-from-alias="OH" join-optional="true">
            <key-map field-name="currencyUom" related="uomId"/>
        </member-entity>
        <member-entity entity-alias="SSO" entity-name="co.hotwax.shopify.ShopifyShopOrder" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="SCENM" entity-name="moqui.basic.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>
        <member-entity entity-alias="P" entity-name="org.apache.ofbiz.product.product.Product" join-from-alias="OI">
            <key-map field-name="productId"/>
        </member-entity>
        <member-entity entity-alias="PT" entity-name="org.apache.ofbiz.product.product.ProductType" join-from-alias="P" join-optional="true">
            <key-map field-name="productTypeId"/>
        </member-entity>

        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" name="shipGroupSeqId"/>

        <alias entity-alias="OH" name="orderName"/>
        <alias entity-alias="OH" name="grandTotal"/>
        <alias entity-alias="OH" name="productStoreId"/>
        <alias entity-alias="OH" name="orderDate"/>
        <alias entity-alias="OH" field="statusId" name="orderStatusId"/>
        <alias entity-alias="OH" field="externalId" name="orderExternalId"/>
        <alias entity-alias="OH" name="orderTypeId"/>
        <alias entity-alias="OH" name="entryDate"/>

        <alias entity-alias="OI" name="quantity"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" field="statusId" name="itemStatusId"/>
        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" name="cancelQuantity"/>

        <alias entity-alias="OISG" name="facilityId"/>
        <alias entity-alias="OISG" field="contactMechId" name="shipToPostalContactMechId"/>
        <alias entity-alias="OISG" name="shipmentMethodTypeId"/>
        <alias entity-alias="OISG" field="telecomContactMechId" name="shipToTelecomContactMechId"/>
        <alias entity-alias="OISG" name="carrierPartyId"/>

        <alias entity-alias="PS" field="externalId" name="productStoreExternalId"/>

        <alias entity-alias="F" name="facilityTypeId"/>
        <alias entity-alias="F" field="externalId" name="facilityExternalId"/>
        <alias entity-alias="FT" field="parentTypeId" name="parentFacilityTypeId"/>

        <alias entity-alias="UOM" field="abbreviation" name="currency"/>
        <alias entity-alias="SSO" name="shopId"/>
        <alias entity-alias="SCENM" field="enumCode" name="salesChannel"/>

        <alias entity-alias="PT" name="isPhysical"/>
        <alias entity-alias="PT" name="isDigital"/>
    </view-entity>

    <view-entity entity-name="AppeasementView" package="co.hotwax.financial">
        <description>View to get Appeasement order details</description>
        <member-entity entity-alias="RH" entity-name="org.apache.ofbiz.order.return.ReturnHeader"/>
        <member-entity entity-alias="RA" entity-name="org.apache.ofbiz.order.return.ReturnAdjustment" join-from-alias="RH">
            <key-map field-name="returnId"/>
        </member-entity>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader" join-from-alias="RA" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="PS" entity-name="org.apache.ofbiz.product.store.ProductStore" join-from-alias="OH">
            <key-map field-name="productStoreId"/>
        </member-entity>
        <member-entity entity-alias="UOM" entity-name="moqui.basic.Uom" join-from-alias="RH" join-optional="true">
            <key-map field-name="currencyUomId" related="uomId"/>
        </member-entity>

        <alias entity-alias="RH" name="returnId"/>
        <alias entity-alias="RH" name="entryDate"/>
        <alias entity-alias="RH" name="returnDate"/>
        <alias entity-alias="RH" field="fromPartyId" name="customerPartyId" />
        <alias entity-alias="RH" name="originContactMechId"/>
        <alias entity-alias="RH" field="destinationFacilityId" name="returnFacilityId"/>

        <alias entity-alias="RA" name="comments"/>
        <alias entity-alias="RA" name="amount"/>
        <alias entity-alias="RA" name="returnAdjustmentTypeId"/>

        <alias entity-alias="OH" name="orderName"/>
        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OH" name="orderTypeId"/>

        <alias entity-alias="PS" field="externalId" name="productStoreExternalId"/>

        <alias entity-alias="UOM" field="abbreviation" name="currency"/>
        <entity-condition>
            <order-by field-name="-entryDate"/>
        </entity-condition>
    </view-entity>

    <view-entity entity-name="ReturnItemView" package="co.hotwax.financial">
        <description>View to get the Return Item Details.</description>
        <member-entity entity-alias="RI" entity-name="org.apache.ofbiz.order.return.ReturnItem"/>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader" join-from-alias="RI" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="SSO" entity-name="co.hotwax.shopify.ShopifyShopOrder" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="RI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="RH" entity-name="org.apache.ofbiz.order.return.ReturnHeader" join-from-alias="RI">
            <key-map field-name="returnId"/>
        </member-entity>
        <member-entity entity-alias="F" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="RH" join-optional="true">
            <key-map field-name="destinationFacilityId" related="facilityId"/>
        </member-entity>
        <member-entity entity-alias="FT" entity-name="org.apache.ofbiz.product.facility.FacilityType" join-from-alias="F" join-optional="true">
            <key-map field-name="facilityTypeId"/>
        </member-entity>
        <member-entity entity-alias="PS" entity-name="org.apache.ofbiz.product.store.ProductStore" join-from-alias="OH" join-optional="true">
            <key-map field-name="productStoreId"/>
        </member-entity>
        <member-entity entity-alias="UOM" entity-name="moqui.basic.Uom" join-from-alias="RH" join-optional="true">
            <key-map field-name="currencyUomId" related="uomId"/>
        </member-entity>
        <member-entity entity-alias="SCENM" entity-name="moqui.basic.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>
        <alias entity-alias="RI" name="returnId"/>
        <alias entity-alias="RI" name="returnItemSeqId"/>
        <alias entity-alias="RI" name="orderId"/>
        <alias entity-alias="RI" name="orderItemSeqId"/>
        <alias entity-alias="RI" field="returnPrice" name="returnItemPrice"/>
        <alias entity-alias="RI" name="returnQuantity" function="sum"/>
        <alias entity-alias="RI" name="returnReasonId"/>
        <alias entity-alias="RI" name="productId"/>
        <alias entity-alias="RI" name="returnReasonNote" field="reason"/>
        <alias entity-alias="RI" field="statusId" name="returnItemStatusId"/>
        <alias entity-alias="RI" name="returnItemTypeId"/>
        <alias entity-alias="RI" name="expectedItemStatus"/>
        <alias entity-alias="OI" name="orderItemRequestedShipMethTypeId" field="requestedShipMethTypeId"/>
        <alias entity-alias="OI" name="taxCode"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>

        <alias entity-alias="OH" name="orderName"/>
        <alias entity-alias="OH" field="salesChannelEnumId" name="orderSalesChannelEnumId"/>
        <alias entity-alias="SCENM" field="enumCode" name="orderSalesChannel"/>

        <alias entity-alias="F" field="externalId" name="facilityExternalId"/>
        <alias entity-alias="F" name="facilityId"/>
        <alias entity-alias="FT" name="facilityTypeId"/>
        <alias entity-alias="FT" field="parentTypeId" name="parentFacilityTypeId"/>

        <alias entity-alias="PS" field="externalId" name="productStoreExternalId"/>
        <alias entity-alias="UOM" field="abbreviation" name="currencyUom"/>
        <alias entity-alias="RH" field="fromPartyId" name="customerPartyId"/>
        <alias entity-alias="RH" field="originContactMechId" name="shipToContactMechId"/>
        <alias entity-alias="RH" name="returnDate"/>
        <alias entity-alias="RH" field="externalId" name="returnExternalId"/>
        <alias entity-alias="RI" name="returnTypeId"/>
        <alias entity-alias="RI" name="receivedQuantity"/>
        <alias entity-alias="SSO" name="shopId"/>
    </view-entity>

    <view-entity entity-name="OrderItemAndHistory" package="co.hotwax.oms">
        <member-entity entity-alias="OH" entity-name="co.hotwax.customerservice.order.OrderHistory"/>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OH">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="PRO" entity-name="org.apache.ofbiz.product.product.Product" join-from-alias="OI">
            <key-map field-name="productId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="ORHD" entity-name="org.apache.ofbiz.order.order.OrderHeader" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OISGIR" entity-name="org.apache.ofbiz.order.order.OrderItemShipGrpInvRes" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="FAC" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="OISG">
            <key-map field-name="facilityId"/>
        </member-entity>
        <alias-all entity-alias="OH"/>
        <alias name="productStoreId" entity-alias="ORHD"/>
        <alias name="productId" entity-alias="OI"/>
        <alias name="quantity" entity-alias="OISGIR" function="sum"/>
        <alias name="sku" field="internalName" entity-alias="PRO"/>
        <alias name="facilityId" entity-alias="OISG"/>
        <alias name="externalFacilityId" field="externalId" entity-alias="FAC"/>
        <alias name="facilityTypeId" entity-alias="FAC"/>
    </view-entity>
    <!-- View entity to fetch the Order Items for BrokeredOrder Reporting, using member entities of OFBiz -->
    <view-entity entity-name="BrokeredOrderItemsSyncQueue" package="co.hotwax.warehouse">
        <description>View to get details for the Brokered Order Items.</description>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="SCENM" entity-name="moqui.basic.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>
        <member-entity entity-alias="OISGINR" entity-name="org.apache.ofbiz.order.order.OrderItemShipGrpInvRes" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="EFO" entity-name="co.hotwax.integration.order.ExternalFulfillmentOrderItem" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <member-entity entity-alias="F" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="OISG">
            <key-map field-name="facilityId"/>
        </member-entity>
        <member-entity entity-alias="FT" entity-name="org.apache.ofbiz.product.facility.FacilityType" join-from-alias="F">
            <key-map field-name="facilityTypeId"/>
        </member-entity>
        <member-entity entity-alias="ODR" entity-name="org.apache.ofbiz.order.order.OrderRole" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="P" entity-name="org.apache.ofbiz.party.party.Person" join-from-alias="ODR" join-optional="true">
            <key-map field-name="partyId"/>
        </member-entity>
        <member-entity entity-alias="PD" entity-name="org.apache.ofbiz.product.product.Product" join-from-alias="OI">
            <key-map field-name="productId"/>
        </member-entity>
        <member-entity entity-alias="UOM" entity-name="moqui.basic.Uom" join-from-alias="OH" join-optional="true">
            <key-map field-name="currencyUom" related="uomId"/>
        </member-entity>
        <alias entity-alias="OH" name="productStoreId"/>
        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OH" name="orderName"/>
        <alias entity-alias="OH" name="orderDate"/>
        <alias entity-alias="OH" field="statusId" name="orderStatusId"/>
        <alias entity-alias="OH" name="entryDate"/>
        <alias entity-alias="OH" field="externalId" name="orderExternalId"/>
        <alias entity-alias="UOM" field="abbreviation" name="currency"/>
        <alias entity-alias="OH" name="grandTotal"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" field="statusId" name="itemStatusId"/>
        <alias entity-alias="OI" field="quantity" name="orderItemQuantity"/>
        <alias entity-alias="OISGINR" field="quantity" name="reservedItemQuantity" function="sum"/>
        <alias entity-alias="OISGINR" name="reservedDatetime"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="OI" name="itemDescription"/>
        <alias entity-alias="OI" name="requestedDeliveryDate"/>
        <alias entity-alias="OI" name="requestedDeliveryTime"/>
        <alias entity-alias="OI" name="deliveryWindow"/>
        <alias entity-alias="OISG" name="shipGroupSeqId"/>
        <alias entity-alias="OISG" name="shipmentMethodTypeId"/>
        <alias entity-alias="OISG" field="contactMechId" name="postalContactMechId"/>
        <alias entity-alias="OISG" name="telecomContactMechId"/>
        <alias entity-alias="OISG" name="orderFacilityId"/>
        <alias entity-alias="OISG" name="carrierPartyId"/>
        <alias entity-alias="EFO" name="externalFulfillmentOrderItemId"/>
        <alias entity-alias="EFO" name="fulfillmentStatus"/>
        <alias entity-alias="P" field="firstName" name="customerFirstName"/>
        <alias entity-alias="P" field="lastName" name="customerLastName"/>
        <alias entity-alias="F" name="facilityId"/>
        <alias entity-alias="F" field="externalId" name="facilityExternalId"/>
        <alias entity-alias="FT" name="facilityTypeId"/>
        <alias entity-alias="FT" field="parentTypeId" name="parentFacilityTypeId"/>
        <alias entity-alias="OS" name="statusDatetime"/>
        <alias entity-alias="PD" name="productId"/>
        <alias entity-alias="PD" name="productTypeId"/>
        <alias entity-alias="PD" name="internalName"/>
        <alias entity-alias="SCENM" field="enumCode" name="salesChannel"/>
        <alias entity-alias="ODR" field="partyId" name="customerPartyId"/>
        <entity-condition>
            <econditions combine="and">
                <econdition entity-alias="OH" field-name="orderTypeId" operator="equals" value="SALES_ORDER"/>
                <econdition entity-alias="FT" field-name="parentTypeId" operator="not-equals" value="VIRTUAL_FACILITY"/>
                <econditions combine="or">
                    <econdition entity-alias="EFO" field-name="fulfillmentStatus" operator="equals" value="REJECT"/>
                    <econdition entity-alias="EFO" field-name="fulfillmentStatus" operator="equals" value=""/>
                </econditions>
                <econditions combine="or">
                    <econdition entity-alias="OI" field-name="quantity" operator="greater" to-entity-alias="OI" to-field-name="cancelQuantity"/>
                    <econdition entity-alias="OI" field-name="cancelQuantity" operator="equals" value=""/>
                </econditions>
                <econdition entity-alias="ODR" field-name="roleTypeId" operator="equals" value="BILL_TO_CUSTOMER"/>
            </econditions>
            <order-by field-name="entryDate"/>
        </entity-condition>
    </view-entity>

    <view-entity entity-name="PostalAddressView" package="co.hotwax.financial">
        <member-entity entity-alias="PA" entity-name="org.apache.ofbiz.party.contact.PostalAddress"/>
        <member-entity entity-alias="COUNTRYGEO" entity-name="moqui.basic.Geo" join-from-alias="PA" join-optional="true">
            <key-map field-name="countryGeoId" related="geoId"/>
        </member-entity>
        <member-entity entity-alias="STATEGEO" entity-name="moqui.basic.Geo" join-from-alias="PA" join-optional="true">
            <key-map field-name="stateProvinceGeoId" related="geoId"/>
        </member-entity>
        <alias-all entity-alias="PA"/>
        <alias entity-alias="COUNTRYGEO" field="geoCodeAlpha2" name="countryGeoCode"/>
        <alias entity-alias="STATEGEO" field="geoCodeAlpha2" name="stateProvinceGeoCode"/>
        <alias entity-alias="STATEGEO" field="geoName" name="stateProvinceGeoName"/>
        <alias entity-alias="COUNTRYGEO" field="geoName" name="countryGeoName"/>
    </view-entity>

    <!-- This View can be used to fetch Order level adjustments which are not sent to external systems.
        Note: This is not used to fetch Item level adjustments history -->

    <view-entity entity-name="ReturnAdjustmentAndHistory" package="co.hotwax.financial">
        <member-entity entity-alias="RA" entity-name="org.apache.ofbiz.order.return.ReturnAdjustment"/>
        <member-entity entity-alias="RAH" entity-name="co.hotwax.integration.order.return.ReturnAdjustmentHistory" join-from-alias="RA" join-optional="true">
            <key-map field-name="returnAdjustmentId"/>
        </member-entity>
        <alias entity-alias="RA" name="returnAdjustmentId"/>
        <alias entity-alias="RA" name="returnAdjustmentTypeId"/>
        <alias entity-alias="RA" name="returnId"/>
        <alias entity-alias="RA" name="returnItemSeqId"/>
        <alias entity-alias="RA" name="shipGroupSeqId"/>
        <alias entity-alias="RA" name="comments"/>
        <alias entity-alias="RA" name="description"/>
        <alias entity-alias="RA" name="amount"/>
        <alias entity-alias="RA" name="createdDate"/>
        <entity-condition>
            <econdition entity-alias="RAH" field-name="returnAdjustmentId" value=""/>
        </entity-condition>
    </view-entity>
    <view-entity entity-name="OrderAdjustmentAndHistory" package="co.hotwax.financial">
        <member-entity entity-alias="OA" entity-name="org.apache.ofbiz.order.order.OrderAdjustment"/>
        <member-entity entity-alias="OAH" entity-name="co.hotwax.integration.order.OrderAdjustmentHistory" join-from-alias="OA" join-optional="true">
            <key-map field-name="orderAdjustmentId"/>
        </member-entity>
        <alias entity-alias="OA" name="orderAdjustmentId"/>
        <alias entity-alias="OA" name="orderAdjustmentTypeId"/>
        <alias entity-alias="OA" name="orderId"/>
        <alias entity-alias="OA" name="orderItemSeqId"/>
        <alias entity-alias="OA" name="shipGroupSeqId"/>
        <alias entity-alias="OA" name="comments"/>
        <alias entity-alias="OA" name="description"/>
        <alias entity-alias="OA" name="amount"/>
        <alias entity-alias="OA" name="createdDate"/>
        <entity-condition>
            <econdition entity-alias="OAH" field-name="orderAdjustmentId" value=""/>
        </entity-condition>
    </view-entity>
    <view-entity entity-name="FulfilledOrderAdjustmentAndHistory" package="co.hotwax.financial">
        <member-entity entity-alias="OA" entity-name="org.apache.ofbiz.order.order.OrderAdjustment"/>
        <member-entity entity-alias="FOAH" entity-name="co.hotwax.integration.order.FulfilledOrderAdjustmentHistory" join-from-alias="OA" join-optional="true">
            <key-map field-name="orderAdjustmentId"/>
        </member-entity>
        <alias entity-alias="OA" name="orderAdjustmentId"/>
        <alias entity-alias="OA" name="orderAdjustmentTypeId"/>
        <alias entity-alias="OA" name="orderId"/>
        <alias entity-alias="OA" name="orderItemSeqId"/>
        <alias entity-alias="OA" name="shipGroupSeqId"/>
        <alias entity-alias="OA" name="comments"/>
        <alias entity-alias="OA" name="description"/>
        <alias entity-alias="OA" name="amount"/>
        <alias entity-alias="OA" name="createdDate"/>
        <entity-condition>
            <econdition entity-alias="FOAH" field-name="orderAdjustmentId" value=""/>
        </entity-condition>
    </view-entity>
    <view-entity entity-name="ReturnItemAndAdjustment" package="co.hotwax.financial">
        <description>View to get the Return Items and their Adjustments.</description>
        <member-entity entity-alias="RI" entity-name="org.apache.ofbiz.order.return.ReturnItem"/>
        <member-entity entity-alias="RS" entity-name="org.apache.ofbiz.order.return.ReturnStatus" join-from-alias="RI">
            <key-map field-name="returnId"/>
            <key-map field-name="returnItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="RA" entity-name="org.apache.ofbiz.order.return.ReturnAdjustment" join-from-alias="RI" join-optional="true">
            <key-map field-name="returnId"/>
            <key-map field-name="returnItemSeqId"/>
        </member-entity>
        <alias entity-alias="RI" name="returnId"/>
        <alias entity-alias="RI" name="returnItemSeqId"/>
        <alias entity-alias="RI" name="orderId"/>
        <alias entity-alias="RI" name="orderItemSeqId"/>
        <alias entity-alias="RI" name="returnPrice"/>
        <alias entity-alias="RI" name="returnQuantity"/>
        <alias entity-alias="RS" name="statusId" />
        <alias entity-alias="RS" name="completedDatetime" field="statusDatetime" function="max"/>
        <alias entity-alias="RA" name="returnAdjustmentTypeId"/>
        <alias entity-alias="RA" name="comments"/>
        <alias entity-alias="RA" name="description"/>
        <alias entity-alias="RA" name="amount" function="sum"/>
        <entity-condition>
            <econditions>
                <econdition entity-alias="RS" field-name="returnItemSeqId" operator="not-equals" value=""/>
            </econditions>
            <order-by field-name="completedDatetime"/>
        </entity-condition>
    </view-entity>

    <view-entity entity-name="OrderItemAndAdjustment" package="co.hotwax.financial">
        <description>View to get the Order Items and their Adjustments.</description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OA" entity-name="org.apache.ofbiz.order.order.OrderAdjustment" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" name="quantity"/>
        <alias entity-alias="OS" name="statusId" />
        <alias entity-alias="OS" field="statusDatetime" name="completedDatetime"/>
        <alias entity-alias="OA" name="orderAdjustmentTypeId"/>
        <alias entity-alias="OA" name="comments"/>
        <alias entity-alias="OA" name="description"/>
        <alias entity-alias="OA" name="amount" function="sum"/>
        <entity-condition>
            <econditions>
                <econdition entity-alias="OS" field-name="orderItemSeqId" operator="not-equals" value=""/>
            </econditions>
            <order-by field-name="completedDatetime"/>
        </entity-condition>
    </view-entity>

    <!-- NOTE: Not added group attribute in the view entity definition as fix done in Moqui,
         TODO update all view entities to remove the use of group attribute as not needed now -->
    <!-- The ReturnItemResponse entity is included in the view for handling below scenario,
        1. The same order has a return and an appeasement.
        2. The view should include ReturnItemResponse entity with join-optional true as for Sales,
        this entity does not hold records, but it contains records for Returns and Appeasements.
        2. Now for Sales Items, we can fetch payment details using order Id and statusId = 'PAYMENT_SETTLED'.
        3. For Return Items, we can fetch payment details using return Id and statusId = 'PAYMENT_REFUNDED'.
        4. For Appeasements, we can fetch payment details using return Id and statusId = 'PAYMENT_REFUNDED'.
        5. This way we can correctly fetch details for the return and appeasement for the same order. -->
    <view-entity entity-name="OrderPaymentPreferenceAndType" package="co.hotwax.financial">
        <member-entity entity-alias="OPP" entity-name="org.apache.ofbiz.order.order.OrderPaymentPreference"/>
        <member-entity entity-alias="PMT" entity-name="org.apache.ofbiz.accounting.payment.PaymentMethodType" join-from-alias="OPP" join-optional="true">
            <key-map field-name="paymentMethodTypeId"/>
        </member-entity>
        <member-entity entity-alias="RIR" entity-name="org.apache.ofbiz.order.return.ReturnItemResponse" join-from-alias="OPP" join-optional="true">
            <key-map field-name="orderPaymentPreferenceId"/>
        </member-entity>
        <alias entity-alias="OPP" name="orderId"/>
        <alias entity-alias="OPP" name="statusId"/>
        <alias entity-alias="OPP" field="maxAmount" name="amount" />
        <alias entity-alias="OPP" name="createdDate" />
        <alias entity-alias="OPP" name="manualAuthCode" />
        <alias entity-alias="OPP" name="manualRefNum" />
        <alias entity-alias="OPP" name="paymentMode" />
        <alias entity-alias="OPP" name="requestId"/>
        <alias entity-alias="OPP" name="applicationIdentifier"/>
        <alias entity-alias="PMT" name="paymentMethodTypeId"/>
        <alias entity-alias="PMT" name="paymentMethodCode"/>
        <alias entity-alias="PMT" field="description" name="paymentMethodDescription"/>
        <alias entity-alias="RIR" name="returnId"/>
    </view-entity>

    <!-- To get the Party and Person details -->
    <view-entity entity-name="PartyDetailView" package="org.apache.ofbiz.party.party">
        <member-entity entity-alias="PTY" entity-name="org.apache.ofbiz.party.party.Party"/>
        <member-entity entity-alias="PER" entity-name="org.apache.ofbiz.party.party.Person" join-from-alias="PTY" join-optional="true">
            <key-map field-name="partyId"/>
        </member-entity>
        <member-entity entity-alias="PTYG" entity-name="org.apache.ofbiz.party.party.PartyGroup" join-from-alias="PTY" join-optional="true">
            <key-map field-name="partyId"/>
        </member-entity>
        <alias-all entity-alias="PTY"/>
        <alias-all entity-alias="PER">
            <exclude field="partyId"/>
            <exclude field="comments"/>
        </alias-all>
        <alias-all entity-alias="PTYG">
            <exclude field="partyId"/>
        </alias-all>
        <alias entity-alias="PER" field="comments" name="personComments"/>
    </view-entity>

    <!-- This view is used for fetching the Fulfilled Order Item details.
    NOTE:
    1. It is being used to prepare the Feed for Fulfilled Order Items.
    2. This includes the use of OrderFulfillmentHistory entity to get only those fulfilled order items for which history is not created.
    3. This is required so that when the view is used in the feed, the same order items is not included multiple times in the feeds. -->
    <view-entity entity-name="FulfilledOrderItemsSyncQueue" package="co.hotwax.warehouse">
        <description>View to get details for the Order Item.</description>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="SSO" entity-name="co.hotwax.shopify.ShopifyShopOrder" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <!--  1. Previously, the join was added with the ExternalFulfillmentOrderItem entity using the fields orderId,orderItemSeqId,shipGroupSeqId.
                     2. Now the change is done to join with the OrderFulfillmentHistory entity using the fields orderId and orderItemSeqId.
                     3. The shipGroupSeqId is not available in OrderFulfillmentHistory entity, this could have created possible issue for the scenario of explode OFF partial fulfillment
                     of an order Item as in that case shipGroupSeqId can be same.
                     4. This will not be an issue as discussed, for this scenario, new orderItem will be created for the remaining quantity for that item.  -->
        <member-entity entity-alias="OFH" entity-name="co.hotwax.integration.order.OrderFulfillmentHistory" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <member-entity entity-alias="F" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="OISG">
            <key-map field-name="facilityId"/>
        </member-entity>
        <member-entity entity-alias="FT" entity-name="org.apache.ofbiz.product.facility.FacilityType" join-from-alias="F">
            <key-map field-name="facilityTypeId"/>
        </member-entity>
        <member-entity entity-alias="P" entity-name="org.apache.ofbiz.product.product.Product" join-from-alias="OI" join-optional="true">
            <key-map field-name="productId"/>
        </member-entity>
        <member-entity entity-alias="PT" entity-name="org.apache.ofbiz.product.product.ProductType" join-from-alias="P" join-optional="true">
            <key-map field-name="productTypeId"/>
        </member-entity>
        <member-entity entity-alias="SCENM" entity-name="moqui.basic.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>
        <alias entity-alias="OH" name="productStoreId"/>
        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OH" name="orderName"/>
        <alias entity-alias="OH" name="orderDate"/>
        <alias entity-alias="OH" name="orderTypeId"/>
        <alias entity-alias="OH" field="statusId" name="orderStatusId"/>
        <alias entity-alias="OH" name="entryDate"/>
        <alias entity-alias="OH" name="grandTotal"/>
        <alias entity-alias="SSO" name="shopId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" field="statusId" name="itemStatusId"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="OISG" name="shipGroupSeqId"/>
        <alias entity-alias="OISG" field="shipmentMethodTypeId" name="slaShipmentMethodTypeId"/>
        <alias entity-alias="OISG" field="contactMechId" name="postalContactMechId"/>
        <alias entity-alias="OISG" name="telecomContactMechId"/>
        <alias entity-alias="OI" field="quantity" name="itemQuantity"/>
        <alias entity-alias="F" name="facilityId"/>
        <alias entity-alias="F" field="externalId" name="facilityExternalId"/>
        <alias entity-alias="FT" name="facilityTypeId"/>
        <alias entity-alias="FT" field="parentTypeId" name="parentFacilityTypeId"/>
        <alias entity-alias="OS" name="statusDatetime"/>
        <alias entity-alias="P" name="productId"/>
        <alias entity-alias="PT" name="productTypeId"/>
        <alias entity-alias="PT" name="isPhysical"/>
        <alias entity-alias="PT" name="isDigital"/>
        <alias entity-alias="SCENM" field="enumCode" name="salesChannel"/>
        <entity-condition>
            <econdition entity-alias="OFH" field-name="orderId" operator="equals" value=""/>
        </entity-condition>
    </view-entity>

    <!-- This view is used for fetching the Shipment Details for the Fulfilled Order Items.
    NOTE:
    1. It is being used to prepare the Feed for Fulfilled Order Items along with the view FulfilledOrderItemsSyncQueue.
    2. This includes the use of OrderFulfillmentHistory entity to get only those fulfilled order items for which history is not created.
    3. The Shipment entities are included with left join to have optional Shipment details to include digital type goods also. -->
    <view-entity entity-name="OrderItemAndShipment" package="co.hotwax.warehouse">
        <description>View to get Order Item and Shipment Details. The Shipment entities are added
            using left join to get fulfilled order item details for both finished as well digital type goods.
        </description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader" join-from-alias="OI">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="SCENM" entity-name="moqui.basic.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>
        <member-entity entity-alias="UOM" entity-name="moqui.basic.Uom" join-from-alias="OH" join-optional="true">
            <key-map field-name="currencyUom" related="uomId"/>
        </member-entity>
        <member-entity entity-alias="ODR" entity-name="org.apache.ofbiz.order.order.OrderRole" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="P" entity-name="org.apache.ofbiz.party.party.Person" join-from-alias="ODR" join-optional="true">
            <key-map field-name="partyId"/>
        </member-entity>
        <!--  1. Previously, the join was added with the ExternalFulfillmentOrderItem entity using the fields orderId,orderItemSeqId,shipGroupSeqId.
                   2. Now the change is done to join with the OrderFulfillmentHistory entity using the fields orderId and orderItemSeqId.
                   3. The shipGroupSeqId is not available in OrderFulfillmentHistory entity, this could have created possible issue for the scenario of explode OFF partial fulfillment
                   of an order Item as in that case shipGroupSeqId can be same.
                   4. This will not be an issue as discussed, for this scenario, new orderItem will be created for the remaining quantity for that item.  -->
        <member-entity entity-alias="OFH" entity-name="co.hotwax.integration.order.OrderFulfillmentHistory" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="OSH" entity-name="org.apache.ofbiz.order.order.OrderShipment" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="SHI" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentItem" join-from-alias="OSH" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="SPCT" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackageContent" join-from-alias="SHI" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="SPKG" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackage" join-from-alias="SPCT" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentPackageSeqId"/>
        </member-entity>
        <!--  NOTE: ShipmentPackageRouteSeg entity and Shipment entity included for details regarding tracking code, carrier party and shipment method
        and be able to group the items using these fields when the view is used in the Fulfilled Items Feed.
        TODO We may get multiple records for Shipment Route Segments, and this should be revisited for this scenario.  -->
        <member-entity entity-alias="SPRS" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackageRouteSeg" join-from-alias="SPKG" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentPackageSeqId"/>
        </member-entity>
        <member-entity entity-alias="SH" entity-name="org.apache.ofbiz.shipment.shipment.Shipment" join-from-alias="SPRS" join-optional="true">
            <key-map field-name="shipmentId"/>
        </member-entity>
        <member-entity entity-alias="SRS" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentRouteSegment" join-from-alias="SPRS" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentRouteSegmentId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <member-entity entity-alias="F" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="OISG">
            <key-map field-name="facilityId"/>
        </member-entity>
        <member-entity entity-alias="FT" entity-name="org.apache.ofbiz.product.facility.FacilityType" join-from-alias="F">
            <key-map field-name="facilityTypeId"/>
        </member-entity>
        <member-entity entity-alias="PP" entity-name="org.apache.ofbiz.product.product.Product" join-from-alias="OI" join-optional="true">
            <key-map field-name="productId"/>
        </member-entity>
        <member-entity entity-alias="PT" entity-name="org.apache.ofbiz.product.product.ProductType" join-from-alias="PP" join-optional="true">
            <key-map field-name="productTypeId"/>
        </member-entity>
        <alias entity-alias="OH" name="productStoreId"/>
        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OH" name="orderName"/>
        <alias entity-alias="OH" name="orderDate"/>
        <alias entity-alias="OH" field="statusId" name="orderStatusId"/>
        <alias entity-alias="OH" field="externalId" name="orderExternalId"/>
        <alias entity-alias="OH" name="entryDate"/>
        <alias entity-alias="OH" name="grandTotal"/>
        <alias entity-alias="UOM" field="abbreviation" name="currency"/>
        <alias entity-alias="SCENM" field="enumCode" name="salesChannel"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" field="statusId" name="itemStatusId"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="ODR" field="partyId" name="customerPartyId"/>
        <alias entity-alias="P" field="firstName" name="customerFirstName"/>
        <alias entity-alias="P" field="lastName" name="customerLastName"/>
        <alias entity-alias="OISG" name="shipGroupSeqId"/>
        <alias entity-alias="OISG" name="maySplit"/>
        <alias entity-alias="OISG" field="shipmentMethodTypeId" name="slaShipmentMethodTypeId"/>
        <alias entity-alias="OISG" field="contactMechId" name="postalContactMechId"/>
        <alias entity-alias="OISG" name="telecomContactMechId"/>
        <alias entity-alias="OISG" name="orderFacilityId"/>
        <alias entity-alias="OI" field="quantity" name="itemQuantity"/>
        <alias entity-alias="F" name="facilityId"/>
        <alias entity-alias="F" field="externalId" name="facilityExternalId"/>
        <alias entity-alias="FT" name="facilityTypeId"/>
        <alias entity-alias="FT" field="parentTypeId" name="parentFacilityTypeId"/>
        <alias entity-alias="OS" name="statusDatetime" function="max"/>
        <alias entity-alias="PP" name="productId"/>
        <alias entity-alias="PP" name="internalName"/>
        <!-- Selecting the shippedQuantity from OrderItem instead of OrderShipment
             this is because the Orders will always be exploded in HC and hence for each orderItem
             a shipmentItem will be created and will be fulfilled so we can take the quantity of OrderItem
             as the shipped quantity. -->
        <alias entity-alias="OI" field="quantity" name="shippedQuantity"/>
        <alias entity-alias="SHI" name="shipmentId"/>
        <alias entity-alias="SHI" name="shipmentItemSeqId" is-aggregate="true"/>
        <alias entity-alias="SH" field="statusId" name="shipmentStatusId"/>
        <alias entity-alias="SH" field="destinationContactMechId" name="shipToContactMechId"/>
        <alias entity-alias="SH" field="destinationTelecomNumberId" name="shipToTelecomContactMechId"/>
        <alias entity-alias="SH" name="shipmentTypeId"/>
        <alias entity-alias="SPRS" field="trackingCode" name="trackingNumber"/>
        <alias entity-alias="SRS" name="carrierPartyId"/>
        <alias entity-alias="SH" name="shipmentMethodTypeId"/>
        <alias entity-alias="PT" name="productTypeId"/>
        <alias entity-alias="PT" name="isPhysical"/>
        <alias entity-alias="PT" name="isDigital"/>
        <alias entity-alias="SRS" name="actualCarrierCode"/>
        <entity-condition>
            <!-- Here we are preparing the Shipment Item for eligible Order that are not sent to the external system.
             So we need to add the below condition same as FulfilledOrderItemsSyncQueue view. -->
            <econdition entity-alias="ODR" field-name="roleTypeId" operator="equals" value="BILL_TO_CUSTOMER"/>
            <econdition entity-alias="OFH" field-name="orderId" operator="equals" value=""/>
            <econditions combine="or">
                <econdition entity-alias="OI" field-name="quantity" operator="greater" to-entity-alias="OI" to-field-name="cancelQuantity"/>
                <econdition entity-alias="OI" field-name="cancelQuantity" operator="equals" value=""/>
            </econditions>
        </entity-condition>
    </view-entity>

    <!-- TODO: This view entity can be removed in future when a new order item will be created for remaining quantities of an order item in new Shipment
         in case of Partial Fulfillment Explode-off scenario. The existing views FulfilledOrderItemsSyncQueue and OrderItemAndShipment can be used in place
         of it.
    This view is used for both purposes fetch the Fulfilled Order Item details and fetch the Shipment Details for the Fulfilled Order Items.
    NOTE:
    1. It is being used to prepare the Feed for Transfer Order Fulfilled Items.
    2. This includes the use of OrderFulfillmentHistory entity to get only those fulfilled order items shipment wise for which history is not created.
    3. It is used to handle the scenario of explode-off in which an item can be included in multiple Shipments if its quantity is greater than 1.
       Here, Order Item Ship Group Assoc is removed and ship group seq id is directly fetched from Order Item.
       IMP: Included Shipment id check to fetch Fulfilled Order Items from History to exclude order items for a shipment which are already sent. -->
    <view-entity entity-name="TransferOrderItemAndShipment" package="co.hotwax.warehouse">
        <description>View to get Order Item and Shipment Details. The Shipment entities are added
            using left join to get fulfilled order item details for both finished as well digital type goods.
        </description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader" join-from-alias="OI">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="SCENM" entity-name="moqui.basic.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>
        <member-entity entity-alias="UOM" entity-name="moqui.basic.Uom" join-from-alias="OH" join-optional="true">
            <key-map field-name="currencyUom" related="uomId"/>
        </member-entity>
        <member-entity entity-alias="ODR" entity-name="org.apache.ofbiz.order.order.OrderRole" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="P" entity-name="org.apache.ofbiz.party.party.Person" join-from-alias="ODR" join-optional="true">
            <key-map field-name="partyId"/>
        </member-entity>
        <member-entity entity-alias="OSH" entity-name="org.apache.ofbiz.order.order.OrderShipment" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <!--  1. Previously, the join was added with the ExternalFulfillmentOrderItem entity using the fields orderId,orderItemSeqId,shipGroupSeqId.
                   2. Now the change is done to join with the OrderFulfillmentHistory entity using the fields orderId and orderItemSeqId.
                   3. The shipGroupSeqId is not available in OrderFulfillmentHistory entity, this could have created possible issue for the scenario of explode OFF partial fulfillment
                   of an order Item as in that case shipGroupSeqId can be same.
                   4. This will not be an issue as discussed, for this scenario, new orderItem will be created for the remaining quantity for that item.  -->
        <member-entity entity-alias="OFH" entity-name="co.hotwax.integration.order.OrderFulfillmentHistory" join-from-alias="OSH" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="shipmentId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="SHI" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentItem" join-from-alias="OSH" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="SPCT" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackageContent" join-from-alias="SHI" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="SPKG" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackage" join-from-alias="SPCT" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentPackageSeqId"/>
        </member-entity>
        <!--  NOTE: ShipmentPackageRouteSeg entity and Shipment entity included for details regarding tracking code, carrier party and shipment method
        and be able to group the items using these fields when the view is used in the Fulfilled Items Feed.
        TODO We may get multiple records for Shipment Route Segments, and this should be revisited for this scenario.  -->
        <member-entity entity-alias="SPRS" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackageRouteSeg" join-from-alias="SPKG" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentPackageSeqId"/>
        </member-entity>
        <member-entity entity-alias="SH" entity-name="org.apache.ofbiz.shipment.shipment.Shipment" join-from-alias="SPRS" join-optional="true">
            <key-map field-name="shipmentId"/>
        </member-entity>
        <member-entity entity-alias="SRS" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentRouteSegment" join-from-alias="SPRS" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentRouteSegmentId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <member-entity entity-alias="F" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="OISG">
            <key-map field-name="facilityId"/>
        </member-entity>
        <member-entity entity-alias="FT" entity-name="org.apache.ofbiz.product.facility.FacilityType" join-from-alias="F">
            <key-map field-name="facilityTypeId"/>
        </member-entity>
        <member-entity entity-alias="PP" entity-name="org.apache.ofbiz.product.product.Product" join-from-alias="OI" join-optional="true">
            <key-map field-name="productId"/>
        </member-entity>
        <member-entity entity-alias="PT" entity-name="org.apache.ofbiz.product.product.ProductType" join-from-alias="PP" join-optional="true">
            <key-map field-name="productTypeId"/>
        </member-entity>
        <alias entity-alias="OH" name="productStoreId"/>
        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OH" name="orderName"/>
        <alias entity-alias="OH" name="orderDate"/>
        <alias entity-alias="OH" name="orderTypeId"/>
        <alias entity-alias="OH" field="statusId" name="orderStatusId"/>
        <alias entity-alias="OH" field="externalId" name="orderExternalId"/>
        <alias entity-alias="OH" name="entryDate"/>
        <alias entity-alias="OH" name="grandTotal"/>
        <alias entity-alias="UOM" field="abbreviation" name="currency"/>
        <alias entity-alias="SCENM" field="enumCode" name="salesChannel"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" field="statusId" name="itemStatusId"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="ODR" field="partyId" name="customerPartyId"/>
        <alias entity-alias="P" field="firstName" name="customerFirstName"/>
        <alias entity-alias="P" field="lastName" name="customerLastName"/>
        <alias entity-alias="OISG" name="shipGroupSeqId"/>
        <alias entity-alias="OISG" name="maySplit"/>
        <alias entity-alias="OISG" field="shipmentMethodTypeId" name="slaShipmentMethodTypeId"/>
        <alias entity-alias="OISG" field="contactMechId" name="postalContactMechId"/>
        <alias entity-alias="OISG" name="telecomContactMechId"/>
        <alias entity-alias="OI" field="quantity" name="itemQuantity"/>
        <alias entity-alias="F" name="facilityId"/>
        <alias entity-alias="F" field="externalId" name="facilityExternalId"/>
        <alias entity-alias="FT" name="facilityTypeId"/>
        <alias entity-alias="FT" field="parentTypeId" name="parentFacilityTypeId"/>
        <alias entity-alias="OS" name="statusDatetime" function="max"/>
        <alias entity-alias="PP" name="productId"/>
        <alias entity-alias="PP" name="internalName"/>
        <alias entity-alias="OSH" field="quantity" name="shippedQuantity"/>
        <alias entity-alias="SHI" name="shipmentId"/>
        <alias entity-alias="SHI" name="shipmentItemSeqId"/>
        <alias entity-alias="SH" field="statusId" name="shipmentStatusId"/>
        <alias entity-alias="SH" field="destinationContactMechId" name="shipToContactMechId"/>
        <alias entity-alias="SH" field="destinationTelecomNumberId" name="shipToTelecomContactMechId"/>
        <alias entity-alias="SH" name="shipmentTypeId"/>
        <alias entity-alias="SPRS" field="trackingCode" name="trackingNumber"/>
        <alias entity-alias="SH" name="carrierPartyId"/>
        <alias entity-alias="SH" name="shipmentMethodTypeId"/>
        <alias entity-alias="PT" name="productTypeId"/>
        <alias entity-alias="PT" name="isPhysical"/>
        <alias entity-alias="PT" name="isDigital"/>
        <alias entity-alias="SRS" name="actualCarrierCode"/>
        <entity-condition>
            <!-- Here we are preparing the Shipment Item for eligible Order that are not sent to the external system.
             So we need to add the below condition same as FulfilledOrderItemsSyncQueue view. -->
            <econdition entity-alias="ODR" field-name="roleTypeId" operator="equals" value="BILL_TO_CUSTOMER"/>
            <econdition entity-alias="OFH" field-name="orderId" operator="equals" value=""/>
            <econditions combine="or">
                <econdition entity-alias="OI" field-name="quantity" operator="greater" to-entity-alias="OI" to-field-name="cancelQuantity"/>
                <econdition entity-alias="OI" field-name="cancelQuantity" operator="equals" value=""/>
            </econditions>
        </entity-condition>
    </view-entity>

    <!-- View entity to fetch the shipment details of the associated order items -->
    <view-entity entity-name="OrderItemAssocAndShipment" package="co.hotwax.warehouse">
        <member-entity entity-alias="OIA" entity-name="org.apache.ofbiz.order.order.OrderItemAssoc"/>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderShipment" join-from-alias="OIA">
            <key-map field-name="toOrderId" related="orderId"/>
            <key-map field-name="toOrderItemSeqId" related="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="SH" entity-name="org.apache.ofbiz.shipment.shipment.Shipment" join-from-alias="OS">
            <key-map field-name="shipmentId"/>
        </member-entity>
        <member-entity entity-alias="SRS" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentRouteSegment" join-from-alias="SH">
            <key-map field-name="shipmentId"/>
        </member-entity>
        <member-entity entity-alias="SPRS" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackageRouteSeg" join-from-alias="SRS">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentRouteSegmentId"/>
        </member-entity>
        <alias entity-alias="OIA" name="orderId"/>
        <alias entity-alias="OIA" name="orderItemSeqId"/>
        <alias entity-alias="OIA" name="shipGroupSeqId"/>
        <alias entity-alias="OIA" name="toOrderId"/>
        <alias entity-alias="OIA" name="toOrderItemSeqId"/>
        <alias entity-alias="OIA" name="toShipGroupSeqId"/>
        <alias entity-alias="OIA" name="orderItemAssocTypeId"/>
        <alias entity-alias="SH" name="shipmentId"/>
        <alias entity-alias="SH" name="shipmentTypeId"/>
        <alias entity-alias="SH" field="statusId" name="shipmentStatusId"/>
        <alias entity-alias="SH" name="shipmentCreatedDate" field="createdDate"/>
        <alias entity-alias="SH" name="shipmentMethodTypeId"/>
        <alias entity-alias="SH" name="carrierPartyId"/>
        <alias entity-alias="SRS" name="shipmentRouteSegmentId"/>
        <alias entity-alias="SPRS" name="trackingNumber" field="trackingCode"/>
        <alias entity-alias="SRS" name="actualCarrierCode"/>
    </view-entity>

    <!-- View entity to fetch order item and return item details -->
    <view-entity entity-name="OrderItemAndReturnItemView" package="co.hotwax.financial">
        <description>View to fetch the Order Item and Return Item Details.</description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <member-entity entity-alias="RI" entity-name="org.apache.ofbiz.order.return.ReturnItem" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" field="statusId" name="orderItemStatus"/>
        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" name="quantity" function="sum"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="OI" name="orderItemTypeId"/>
        <alias entity-alias="OI" name="cancelQuantity"/>
        <alias-all entity-alias="RI">
            <exclude field="statusId"/>
            <exclude field="productId"/>
        </alias-all>
        <alias entity-alias="RI" field="statusId" name="returnItemStatus"/>
    </view-entity>

    <!-- View entity to fetch Order Item and Attribute details. -->
    <view-entity entity-name="OrderItemAndAttribute" package="co.hotwax.financial">
        <description>View to fetch the Order Item and Item Attribute Details.</description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <member-entity entity-alias="OIA" entity-name="org.apache.ofbiz.order.order.OrderItemAttribute" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" field="statusId" name="orderItemStatus"/>
        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" name="quantity" function="sum"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="OI" name="orderItemTypeId"/>
        <alias-all entity-alias="OIA">
            <exclude field="orderId"/>
            <exclude field="orderItemSeqId"/>
        </alias-all>
    </view-entity>

    <view-entity entity-name="OrderItemDetail" package="co.hotwax.order">
        <description>View to get Order details for Sales Order Item</description>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="PS" entity-name="org.apache.ofbiz.product.store.ProductStore" join-from-alias="OH">
            <key-map field-name="productStoreId"/>
        </member-entity>
        <member-entity entity-alias="F" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="OISG" join-optional="true">
            <key-map field-name="facilityId"/>
        </member-entity>
        <member-entity entity-alias="FT" entity-name="org.apache.ofbiz.product.facility.FacilityType" join-from-alias="F" join-optional="true">
            <key-map field-name="facilityTypeId"/>
        </member-entity>
        <member-entity entity-alias="UOM" entity-name="moqui.basic.Uom" join-from-alias="OH" join-optional="true">
            <key-map field-name="currencyUom" related="uomId"/>
        </member-entity>
        <member-entity entity-alias="SCENM" entity-name="moqui.basic.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>

        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OH" name="orderName"/>
        <alias entity-alias="OH" name="grandTotal"/>
        <alias entity-alias="OH" name="orderDate"/>
        <alias entity-alias="OH" field="statusId" name="orderStatusId"/>
        <alias entity-alias="OH" name="salesChannelEnumId"/>
        <alias entity-alias="OH" name="orderTypeId"/>
        <alias entity-alias="OH" field="externalId" name="orderExternalId"/>

        <alias entity-alias="UOM" field="abbreviation" name="currency"/>

        <alias entity-alias="SCENM" field="enumCode" name="salesChannelEnumCode"/>

        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" name="shipGroupSeqId"/>
        <alias entity-alias="OI" name="quantity" function="sum"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" name="unitListPrice"/>
        <alias entity-alias="OI" field="statusId" name="itemStatusId"/>
        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" name="taxCode"/>
        <alias entity-alias="OI" name="promisedDatetime"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>

        <alias entity-alias="OISG" name="facilityId"/>
        <alias entity-alias="OISG" field="contactMechId" name="shipToPostalContactMechId"/>
        <alias entity-alias="OISG" name="shipmentMethodTypeId"/>
        <alias entity-alias="OISG" field="telecomContactMechId" name="shipToTelecomContactMechId"/>
        <alias entity-alias="OISG" name="carrierPartyId"/>
        <alias entity-alias="OISG" name="orderFacilityId"/>

        <alias entity-alias="PS" field="externalId" name="productStoreExternalId"/>

        <alias entity-alias="F" name="facilityTypeId"/>
        <alias entity-alias="F" field="externalId" name="facilityExternalId"/>
        <alias entity-alias="FT" field="parentTypeId" name="parentFacilityTypeId"/>
    </view-entity>

    <!-- View entity to fetch Order Item Adjustments and Attributes. -->
    <!-- NOTE: OrderItemAndAdjustment view entity is already exist to fetch the Order Item Adjustments, but in the Get Orders API there is a requirement to prepare the
         Order Item Adjustments along with Order Adjustments Attributes. Hence, a new entity OrderItemAdjustmentAndAttribute is created for this purpose.
         This is required to prevent issues with existing code, as the OrderItemAndAdjustment view is already used to fetch the Order Item Adjustments in the feeds. -->
    <!-- TODO: Check if necessary fields can be added to the existing view and verify the feeds, if everything looks good then use the existing OrderItemAndAdjustment view to simplify things. -->

    <view-entity entity-name="OrderItemAdjustmentAndAttribute" package="co.hotwax.order">
        <description>View to get the Order Items and their Adjustments.</description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <member-entity entity-alias="OA" entity-name="org.apache.ofbiz.order.order.OrderAdjustment" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OAA" entity-name="org.apache.ofbiz.order.order.OrderAdjustmentAttribute" join-from-alias="OA" join-optional="true">
            <key-map field-name="orderAdjustmentId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" name="quantity"/>
        <alias entity-alias="OS" name="statusId" />
        <alias entity-alias="OS" field="statusDatetime" name="completedDatetime"/>
        <alias entity-alias="OA" name="orderAdjustmentId"/>
        <alias entity-alias="OA" name="orderAdjustmentTypeId"/>
        <alias entity-alias="OA" name="comments"/>
        <alias entity-alias="OA" name="exemptAmount"/>
        <alias entity-alias="OA" name="description"/>
        <alias entity-alias="OA" name="amount" function="sum"/>
        <alias entity-alias="OA" name="sourceReferenceId"/>
        <alias entity-alias="OAA" name="attrName"/>
        <alias entity-alias="OAA" name="attrValue"/>
        <alias entity-alias="OISG" name="facilityId"/>
        <entity-condition>
            <econditions>
                <econdition entity-alias="OS" field-name="orderItemSeqId" operator="not-equals" value=""/>
            </econditions>
            <order-by field-name="completedDatetime"/>
        </entity-condition>
    </view-entity>

    <!-- View entity to fetch Order Item and Order Item Change details. -->
    <view-entity entity-name="OrderItemAndChange" package="co.hotwax.order">
        <description>View to fetch the Order Item and Order Item Change Details.</description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <member-entity entity-alias="OIC" entity-name="org.apache.ofbiz.order.order.OrderItemChange" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" name="statusId"/>
        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" name="quantity" function="sum"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="OIC" name="reasonEnumId"/>
        <alias entity-alias="OIC" field="changeDatetime" name="orderItemChangeDatetime"/>
        <alias entity-alias="OIC" name="cancelQuantity"/>
        <alias entity-alias="OISG" name="facilityId"/>
    </view-entity>

    <view-entity entity-name="OrderItemAndShipGroup" package="co.hotwax.order">
        <description>View to get Order Item and Ship Group details.</description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <alias-all entity-alias="OISG">
            <exclude field="orderId"/>
            <exclude field="shipGroupSeqId"/>
        </alias-all>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="OI" name="statusId"/>
        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" name="quantity"/>
        <alias entity-alias="OI" name="cancelQuantity"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" name="shipGroupSeqId"/>
        <alias entity-alias="OI" name="itemDescription"/>
    </view-entity>

    <!-- View entity to fetch Order Adjustment and Item Details -->
    <!-- NOTE: In the Get Orders API for integration with PS, there is a requirement to prepare the
         Order Item Adjustments per product. This new entity is created for this purpose.
         Facility ID is also required, so included OISG also -->
    <view-entity entity-name="OrderAdjustmentAndItem" package="co.hotwax.order">
        <description>View to get the Order Item Adjustments and and item details.</description>
        <member-entity entity-alias="OA" entity-name="org.apache.ofbiz.order.order.OrderAdjustment"/>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OA" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <alias entity-alias="OA" name="orderId"/>
        <alias entity-alias="OA" name="orderItemSeqId"/>
        <alias entity-alias="OA" name="orderAdjustmentId"/>
        <alias entity-alias="OA" name="orderAdjustmentTypeId"/>
        <alias entity-alias="OA" name="comments"/>
        <alias entity-alias="OA" name="exemptAmount"/>
        <alias entity-alias="OA" name="description"/>
        <alias entity-alias="OA" name="amount" function="sum"/>
        <alias entity-alias="OA" name="sourceReferenceId"/>

        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" name="quantity"/>
        <alias entity-alias="OI" name="statusId" />

        <alias entity-alias="OISG" name="facilityId"/>
    </view-entity>

    <!-- View entity to fetch Return Item Adjustments. -->
    <!-- NOTE: ReturnItemAndAdjustment view entity is already exist to fetch the Return Item Adjustments, but in the Get Orders API there is a requirement to prepare the
         Return Item Adjustments as per the product instead of the items. Hence, a new entity ReturnedItemAndAdjustment is created for this purpose.
         This is required to prevent issues with existing code, as the ReturnedItemAndAdjustment view is already used to fetch the Return Item Adjustments in the feeds. -->
    <!-- TODO: Check if necessary fields can be added to the existing view and verify the feeds, if everything looks good then use the existing ReturnedItemAndAdjustment view to simplify things. -->

    <view-entity entity-name="ReturnAdjustmentAndItem" package="co.hotwax.order">
        <description>View to get the Return Items and their Adjustments.</description>
        <member-entity entity-alias="RA" entity-name="org.apache.ofbiz.order.return.ReturnAdjustment"/>
        <member-entity entity-alias="RI" entity-name="org.apache.ofbiz.order.return.ReturnItem" join-from-alias="RA">
            <key-map field-name="returnId"/>
            <key-map field-name="returnItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="RI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="RH" entity-name="org.apache.ofbiz.order.return.ReturnHeader" join-from-alias="RI">
            <key-map field-name="returnId"/>
        </member-entity>

        <alias entity-alias="RA" name="returnId"/>
        <alias entity-alias="RA" name="returnItemSeqId"/>
        <alias entity-alias="RA" name="returnAdjustmentId"/>
        <alias entity-alias="RA" name="returnAdjustmentTypeId"/>
        <alias entity-alias="RA" name="comments"/>
        <alias entity-alias="RA" name="description"/>
        <alias entity-alias="RA" name="amount" function="sum"/>

        <alias entity-alias="RI" name="orderId"/>
        <alias entity-alias="RI" name="orderItemSeqId"/>
        <alias entity-alias="RI" name="returnPrice"/>
        <alias entity-alias="RI" name="returnQuantity"/>
        <alias entity-alias="RI" name="productId"/>
        <alias entity-alias="RI" name="statusId" />

        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>

        <alias entity-alias="RH" field="destinationFacilityId" name="returnFacilityId"/>
    </view-entity>

    <!-- This view is used for fetching the Fulfilled Order Item details to send to ERP.
    NOTE:
    1. It is being used to prepare the Feed for Fulfilled Order Items.
    2. This includes the use of OrderFulfillmentErpHistory entity to get only those fulfilled order items for which history is not created.
    3. This is required so that when the view is used in the feed, the same order items is not included multiple times in the feeds. -->
    <view-entity entity-name="FulfilledOrderItemsForErp" package="co.hotwax.warehouse">
        <description>View to get order item details using OrderFulfillmentErpHistory.</description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <!-- NOTE: Using sub-select here to use the result of SalesOrder view while joining it with OrderItem -->
        <!-- TODO sub-select is used here, but needs to be revisted for query performance and efficiency -->
        <member-entity entity-alias="SOV" entity-name="co.hotwax.financial.SalesOrderView" sub-select="true" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <member-entity entity-alias="OFEH" entity-name="co.hotwax.integration.order.OrderFulfillmentErpHistory" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias-all entity-alias="SOV">
            <exclude field="orderId"/>
            <exclude field="orderItemSeqId"/>
        </alias-all>
        <alias entity-alias="OS" name="statusDatetime" function="max"/>
        <entity-condition>
            <!-- Using the below conditions we are fetching the eligible orders that are not sent to the external system -->
            <econditions combine="and">
                <econdition entity-alias="OFEH" field-name="orderId" operator="equals" value=""/>
                <econditions combine="or">
                    <econdition entity-alias="OI" field-name="quantity" operator="greater" to-entity-alias="OI" to-field-name="cancelQuantity"/>
                    <econdition entity-alias="OI" field-name="cancelQuantity" operator="equals" value=""/>
                </econditions>
            </econditions>
            <!-- TODO facing issue when using in this view, need to debug and check
                    Unknown column 'SOV.ENTRY_DATE' in 'order clause' -->
<!--            <order-by field-name="entryDate"/>-->
        </entity-condition>
    </view-entity>

    <!-- This view is used for fetching the Shipment Details for the Order Items.
    NOTE:
    1. The Shipment entities are included with left join to have optional Shipment details to include digital type goods also. -->
    <view-entity entity-name="OrderItemShipmentDetail" package="co.hotwax.warehouse">
        <description>View to get Order Item and Shipment Details. The Shipment entities are added
            using left join to get fulfilled order item details for both finished as well digital type goods.
        </description>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="SCENM" entity-name="moqui.basic.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>
        <member-entity entity-alias="UOM" entity-name="moqui.basic.Uom" join-from-alias="OH" join-optional="true">
            <key-map field-name="currencyUom" related="uomId"/>
        </member-entity>
        <member-entity entity-alias="ODR" entity-name="org.apache.ofbiz.order.order.OrderRole" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="P" entity-name="org.apache.ofbiz.party.party.Person" join-from-alias="ODR" join-optional="true">
            <key-map field-name="partyId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <member-entity entity-alias="OSH" entity-name="org.apache.ofbiz.order.order.OrderShipment" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="SHI" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentItem" join-from-alias="OSH" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="SPCT" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackageContent" join-from-alias="SHI" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="SPKG" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackage" join-from-alias="SPCT" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentPackageSeqId"/>
        </member-entity>
        <!--  NOTE: ShipmentPackageRouteSeg entity and Shipment entity included for details regarding tracking code, carrier party and shipment method
        and be able to group the items using these fields when the view is used in the Fulfilled Items Feed.
        TODO We may get multiple records for Shipment Route Segments, and this should be revisited for this scenario.  -->
        <member-entity entity-alias="SPRS" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentPackageRouteSeg" join-from-alias="SPKG" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentPackageSeqId"/>
        </member-entity>
        <member-entity entity-alias="SH" entity-name="org.apache.ofbiz.shipment.shipment.Shipment" join-from-alias="SPRS" join-optional="true">
            <key-map field-name="shipmentId"/>
        </member-entity>
        <member-entity entity-alias="SRS" entity-name="org.apache.ofbiz.shipment.shipment.ShipmentRouteSegment" join-from-alias="SPRS" join-optional="true">
            <key-map field-name="shipmentId"/>
            <key-map field-name="shipmentRouteSegmentId"/>
        </member-entity>
        <member-entity entity-alias="F" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="OISG">
            <key-map field-name="facilityId"/>
        </member-entity>
        <member-entity entity-alias="FT" entity-name="org.apache.ofbiz.product.facility.FacilityType" join-from-alias="F">
            <key-map field-name="facilityTypeId"/>
        </member-entity>
        <member-entity entity-alias="PP" entity-name="org.apache.ofbiz.product.product.Product" join-from-alias="OI" join-optional="true">
            <key-map field-name="productId"/>
        </member-entity>
        <member-entity entity-alias="PT" entity-name="org.apache.ofbiz.product.product.ProductType" join-from-alias="PP" join-optional="true">
            <key-map field-name="productTypeId"/>
        </member-entity>
        <alias entity-alias="OH" name="productStoreId"/>
        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OH" name="orderName"/>
        <alias entity-alias="OH" name="orderDate"/>
        <alias entity-alias="OH" field="statusId" name="orderStatusId"/>
        <alias entity-alias="OH" field="externalId" name="orderExternalId"/>
        <alias entity-alias="OH" name="entryDate"/>
        <alias entity-alias="OH" name="grandTotal"/>
        <alias entity-alias="UOM" field="abbreviation" name="currency"/>
        <alias entity-alias="SCENM" field="enumCode" name="salesChannel"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" field="statusId" name="itemStatusId"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="ODR" field="partyId" name="customerPartyId"/>
        <alias entity-alias="ODR" name="roleTypeId"/>
        <alias entity-alias="P" field="firstName" name="customerFirstName"/>
        <alias entity-alias="P" field="lastName" name="customerLastName"/>
        <alias entity-alias="OISG" name="shipGroupSeqId"/>
        <alias entity-alias="OISG" name="maySplit"/>
        <alias entity-alias="OISG" field="shipmentMethodTypeId" name="slaShipmentMethodTypeId"/>
        <alias entity-alias="OISG" field="contactMechId" name="postalContactMechId"/>
        <alias entity-alias="OISG" name="telecomContactMechId"/>
        <alias entity-alias="OISG" name="shippingInstructions"/>
        <alias entity-alias="OI" field="quantity" name="itemQuantity"/>
        <alias entity-alias="OI" name="cancelQuantity"/>
        <alias entity-alias="F" name="facilityId"/>
        <alias entity-alias="F" field="externalId" name="facilityExternalId"/>
        <alias entity-alias="F" name="facilityName"/>
        <alias entity-alias="FT" name="facilityTypeId"/>
        <alias entity-alias="FT" field="parentTypeId" name="parentFacilityTypeId"/>
        <alias entity-alias="FT" field="description" name="facilityTypeDesc"/>
        <alias entity-alias="PP" name="productId"/>
        <alias entity-alias="PP" name="internalName"/>
        <alias entity-alias="OSH" field="quantity" name="shippedQuantity"/>
        <alias entity-alias="SHI" name="shipmentId"/>
        <alias entity-alias="SHI" name="shipmentItemSeqId"/>
        <alias entity-alias="SH" field="statusId" name="shipmentStatusId"/>
        <alias entity-alias="SH" field="destinationContactMechId" name="shipToContactMechId"/>
        <alias entity-alias="SH" field="destinationTelecomNumberId" name="shipToTelecomContactMechId"/>
        <alias entity-alias="SH" name="shipmentTypeId"/>
        <alias entity-alias="SPRS" field="trackingCode" name="trackingNumber"/>
        <alias entity-alias="SH" name="carrierPartyId"/>
        <alias entity-alias="SH" name="shipmentMethodTypeId"/>
        <alias entity-alias="PT" name="productTypeId"/>
        <alias entity-alias="PT" name="isPhysical"/>
        <alias entity-alias="PT" name="isDigital"/>
        <alias entity-alias="SRS" name="actualCarrierCode"/>
        <alias entity-alias="OS" name="statusDatetime"/>
        <entity-condition>
            <!-- Here we are preparing the Shipment Item for eligible Order that are not sent to the external system.
             So we need to add the below condition same as FulfilledOrderItemsSyncQueue view. -->
            <econdition entity-alias="ODR" field-name="roleTypeId" operator="equals" value="BILL_TO_CUSTOMER"/>
            <!-- NOTE these conditions are now included in the OrderItemShipmentForShopify and OrderItemShipmentForErp
                 views which are used to prepare the eligible shipments for the fulfilled order items feed
                 for Shopify and ERP respectively.
                 If this view is being used in any service, check to add these conditions as part of
                 entity conditions in the service if required -->
            <!--<econditions combine="or">
                <econdition entity-alias="OI" field-name="quantity" operator="greater" to-entity-alias="OI" to-field-name="cancelQuantity"/>
                <econdition entity-alias="OI" field-name="cancelQuantity" operator="equals" value=""/>
            </econditions>-->
        </entity-condition>
    </view-entity>

    <!-- This view is used for fetching the Fulfilled Order Item shipment details to send to ERP.
    NOTE:
    1. It is being used to prepare the Feed for Fulfilled Order Items.
    2. This includes the use of OrderFulfillmentErpHistory entity to get only those fulfilled order items for which history is not created.
    3. This is required so that when the view is used in the feed, the same order items is not included multiple times in the feeds. -->
    <view-entity entity-name="OrderItemShipmentForErp" package="co.hotwax.warehouse">
        <description>View to get order item and shipment details using OrderFulfillmentErpHistory.</description>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <!-- NOTE: Using sub-select here to use the result of SalesOrder view while joining it with OrderItem -->
        <!-- TODO sub-select is used here, but needs to be revisted for query performance and efficiency -->
        <member-entity entity-alias="OISD" entity-name="co.hotwax.warehouse.OrderItemShipmentDetail" sub-select="true" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <member-entity entity-alias="OFEH" entity-name="co.hotwax.integration.order.OrderFulfillmentErpHistory" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias-all entity-alias="OISD">
            <exclude field="orderId"/>
            <exclude field="orderItemSeqId"/>
            <exclude field="statusDatetime"/>
        </alias-all>
        <alias entity-alias="OS" name="statusDatetime" function="max"/>
        <entity-condition>
            <econdition entity-alias="OFEH" field-name="orderId" operator="equals" value=""/>
            <econditions combine="or">
                <econdition entity-alias="OI" field-name="quantity" operator="greater" to-entity-alias="OI" to-field-name="cancelQuantity"/>
                <econdition entity-alias="OI" field-name="cancelQuantity" operator="equals" value=""/>
            </econditions>
        </entity-condition>
    </view-entity>


    <!-- New view is added to fetch the eligible orders to be send in the fulfilment feed for Shopify
     -->
    <view-entity entity-name="FulfilledOrdersItemsForShopify" package="co.hotwax.warehouse">
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <!-- TODO sub-select is used here, but needs to be revisted for query performance and efficiency -->
        <member-entity entity-alias="SOV" entity-name="co.hotwax.financial.SalesOrderView" sub-select="true" join-from-alias="OI">
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OFH" entity-name="co.hotwax.integration.order.OrderFulfillmentHistory" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias-all entity-alias="SOV">
            <exclude field="orderId"/>
            <exclude field="orderItemSeqId"/>
        </alias-all>
        <alias entity-alias="OS" name="statusDatetime" function="max"/>
        <entity-condition>
            <econditions combine="and">
                <econdition entity-alias="OFH" field-name="orderId" operator="equals" value=""/>
                <econditions combine="or">
                    <econdition entity-alias="OI" field-name="quantity" operator="greater" to-entity-alias="OI" to-field-name="cancelQuantity"/>
                    <econdition entity-alias="OI" field-name="cancelQuantity" operator="equals" value=""/>
                </econditions>
            </econditions>
        </entity-condition>
    </view-entity>

    <view-entity entity-name="OrderItemShipmentForShopify" package="co.hotwax.warehouse">
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <!-- TODO sub-select is used here, but needs to be revisted for query performance and efficiency -->
        <member-entity entity-alias="OISD" entity-name="co.hotwax.warehouse.OrderItemShipmentDetail" sub-select="true" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OFH" entity-name="co.hotwax.integration.order.OrderFulfillmentHistory" join-from-alias="OI" join-optional="true">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <alias entity-alias="OI" name="orderId"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias-all entity-alias="OISD">
            <exclude field="orderId"/>
            <exclude field="orderItemSeqId"/>
            <exclude field="statusDatetime"/>
        </alias-all>
        <alias entity-alias="OS" name="statusDatetime" function="max"/>
        <entity-condition>
            <econdition entity-alias="OFH" field-name="orderId" operator="equals" value=""/>
            <econditions combine="or">
                <econdition entity-alias="OI" field-name="quantity" operator="greater" to-entity-alias="OI" to-field-name="cancelQuantity"/>
                <econdition entity-alias="OI" field-name="cancelQuantity" operator="equals" value=""/>
            </econditions>
        </entity-condition>
    </view-entity>

    <view-entity entity-name="VirtualFacilityOrderItemCount" package="co.hotwax.warehouse">
        <description>Virtual Facility order item count</description>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="FAC" entity-name="org.apache.ofbiz.product.facility.Facility" join-from-alias="OISG">
            <key-map field-name="facilityId"/>
        </member-entity>
        <member-entity entity-alias="FACT" entity-name="org.apache.ofbiz.product.facility.FacilityType" join-from-alias="FAC">
            <key-map field-name="facilityTypeId"/>
        </member-entity>

        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OH" name="orderTypeId"/>
        <alias entity-alias="OH" name="orderStatusId" field="statusId"/>
        <alias entity-alias="OH" name="productStoreId" />
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" name="itemStatusId" field="statusId" />
        <alias entity-alias="OI" name="productId" />
        <alias entity-alias="OI" name="quantity"/>
        <alias entity-alias="OI" name="itemCount" field="quantity" function="sum"/>
        <alias entity-alias="OISG" name="facilityId"/>
        <alias entity-alias="FAC" name="facilityTypeId"/>

        <entity-condition>
            <econdition entity-alias="FACT" field-name="parentTypeId" operator="equals" value="VIRTUAL_FACILITY"/>
        </entity-condition>
    </view-entity>

    <!--FIXME: This entity call should be replaced with OrderItemAndShipGroup -->
    <view-entity entity-name="OrderItemShipGroupAndAssoc" package="co.hotwax.warehouse">
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem"/>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="orderItemSeqId"/>
        </member-entity>
        <alias entity-alias="OISG" name="orderId"/>
        <alias entity-alias="OISG" name="facilityId"/>
        <alias entity-alias="OISG" name="orderFacilityId"/>
        <alias entity-alias="OISG" name="shipAfterDate"/>
        <alias entity-alias="OISG" name="shipmentMethodTypeId"/>
        <alias entity-alias="OISG" name="shipGroupSeqId"/>
        <alias entity-alias="OI" name="quantity"/>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" name="autoCancelDate"/>
        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" name="itemDescription"/>
        <alias entity-alias="OI" name="itemQuantity" field="quantity"/>
        <alias entity-alias="OI" name="itemExternalId" field="externalId"/>
        <alias entity-alias="OI" name="cancelQuantity"/>
        <alias entity-alias="OI" name="statusId"/>
    </view-entity>
    <view-entity entity-name="OrderHeaderNoteView" package="co.hotwax.order">
        <description>Order Header Note View Entity</description>
        <member-entity entity-alias="OD" entity-name="org.apache.ofbiz.order.order.OrderHeaderNote"/>
        <member-entity entity-alias="ND" entity-name="org.apache.ofbiz.common.note.NoteData" join-from-alias="OD">
            <key-map field-name="noteId"/>
        </member-entity>
        <alias entity-alias="OD" name="orderId"/>
        <alias entity-alias="OD" name="internalNote"/>
        <alias entity-alias="ND" name="noteId"/>
        <alias entity-alias="ND" name="noteName"/>
        <alias entity-alias="ND" name="noteInfo"/>
        <alias entity-alias="ND" name="noteDateTime"/>
        <alias entity-alias="ND" name="noteParty"/>
    </view-entity>
    <view-entity entity-name="OrderPaymentPreferenceView" package="co.hotwax.order">
        <member-entity entity-alias="OPP" entity-name="org.apache.ofbiz.order.order.OrderPaymentPreference"/>
        <member-entity entity-alias="PMT" entity-name="org.apache.ofbiz.accounting.payment.PaymentMethodType" join-from-alias="OPP" join-optional="true">
            <key-map field-name="paymentMethodTypeId"/>
        </member-entity>
        <member-entity entity-alias="SI" entity-name="moqui.basic.StatusItem" join-from-alias="OPP" join-optional="true">
            <key-map field-name="statusId"/>
        </member-entity>
        <alias-all entity-alias="OPP"/>
        <alias entity-alias="PMT" name="paymentMethodTypeDesc" field="description"/>
        <alias entity-alias="SI" name="statusDesc" field="description"/>
    </view-entity>
    <view-entity entity-name="OrderContentAndInfo" package="co.hotwax.order">
        <description>OrderContent, Content and DataResource and ElectronicText View</description>
        <member-entity entity-alias="OC" entity-name="org.apache.ofbiz.order.order.OrderContent"/>
        <member-entity entity-alias="CO" entity-name="org.apache.ofbiz.content.content.Content" join-from-alias="OC">
            <key-map field-name="contentId"/>
        </member-entity>
        <member-entity entity-alias="DR" entity-name="org.apache.ofbiz.content.data.DataResource" join-from-alias="CO" join-optional="true">
            <key-map field-name="dataResourceId"/>
        </member-entity>
        <member-entity entity-alias="ELT" entity-name="org.apache.ofbiz.content.data.ElectronicText" join-from-alias="DR" join-optional="true">
            <key-map field-name="dataResourceId"/>
        </member-entity>
        <alias-all entity-alias="OC"/>
        <alias-all entity-alias="ELT"/>
        <alias entity-alias="CO" name="contentTypeId"/>
        <alias entity-alias="CO" name="description"/>
    </view-entity>
    <view-entity entity-name="CommunicationEventAndOrder" package="co.hotwax.integration">
        <member-entity entity-alias="CO" entity-name="org.apache.ofbiz.order.order.CommunicationEventOrder"/>
        <member-entity entity-alias="CE" entity-name="org.apache.ofbiz.party.communication.CommunicationEvent" join-from-alias="CO">
            <key-map field-name="communicationEventId"/>
        </member-entity>
        <alias-all entity-alias="CO"/>
        <alias-all entity-alias="CE">
            <exclude field="communicationEventId"/>
        </alias-all>
    </view-entity>
    <view-entity entity-name="OrderHeaderAndFacilityChange" package="co.hotwax.order">
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="OFC" entity-name="co.hotwax.facility.OrderFacilityChange" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OS" entity-name="org.apache.ofbiz.order.order.OrderStatus" join-from-alias="OH">
            <key-map field-name="orderId"/>
            <key-map field-name="statusId"/>
        </member-entity>
        <alias-all entity-alias="OFC"/>
        <alias name="statusId" entity-alias="OH"/>
        <alias name="entryDate" entity-alias="OH"/>
        <alias name="orderTypeId" entity-alias="OH"/>
        <alias name="productStoreId" entity-alias="OH"/>
        <alias name="statusDatetime" entity-alias="OS"/>
    </view-entity>
</entities>
